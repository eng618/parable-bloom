version: '3'

tasks:
  bump:patch:
    desc: Bump patch version and tag (1.0.0 → 1.0.1)
    cmds:
      - dart run scripts/bump_version.dart --patch

  bump:minor:
    desc: Bump minor version and tag (1.0.0 → 1.1.0)
    cmds:
      - dart run scripts/bump_version.dart --minor

  bump:major:
    desc: Bump major version and tag (1.0.0 → 2.0.0)
    cmds:
      - dart run scripts/bump_version.dart --major

  bump:build:
    desc: Bump build number and tag (tag includes build) (1.0.0+1 → 1.0.0+2)
    cmds:
      - dart run scripts/bump_version.dart --build

  set:
    desc: Set specific version (usage - task release:set VERSION=2.0.0+5)
    cmds:
      - dart run scripts/bump_version.dart --set {{.VERSION}}

  changelog:update:
    desc: Update CHANGELOG.md from git commits
    cmds:
      - dart run scripts/update_changelog.dart

  changelog:preview:
    desc: Preview changelog updates without writing
    cmds:
      - dart run scripts/update_changelog.dart --dry-run

  # High-level Release Builds 
  web:
    desc: Build the web application for release
    cmds:
      - task: clean
      - task: flutter:get
      - task: flutter:build:web

  android:
    desc: Build the Android application
    cmds:
      - task: clean
      - task: flutter:get
      - task: flutter:build:android

  ios:
    desc: Build the iOS application
    cmds:
      - task: clean
      - task: flutter:get
      - task: flutter:build:ios

  linux:
    desc: Build the Linux application
    cmds:
      - task: clean
      - task: flutter:get
      - task: flutter:build:linux

  windows:
    desc: Build the Windows application
    cmds:
      - task: clean
      - task: flutter:get
      - task: flutter:build:windows

  macos:
    desc: Build the macOS application
    cmds:
      - task: clean
      - task: flutter:get
      - task: flutter:build:macos
